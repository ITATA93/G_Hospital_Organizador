# Antigravity Core Concepts & Architecture Bible

> This document serves as the **SINGLE SOURCE OF TRUTH** for the Antigravity system architecture.
> All agents (Gemini, Claude, Codex) must refer to this document for understanding system behavior.

## 0. What is Antigravity?
**Antigravity** is not just a template; it is an **Agentic Orchestration Ecosystem**.
It provides a standardized layer between the **Human Developer** and multiple **AI Vendors** (Gemini, Claude, OpenAI), ensuring:
1.  **Unified Memory**: All agents share the same context (`docs/`, `brain/`).
2.  **Shared Identity**: Agents assume roles ("Profiles") defined in `settings.json`, not random prompts.
3.  **Tool Abstraction**: Common access to filesystem, git, and execution tools via MCP.

Antigravity turns a "Chatbot" into a "Colleague" by giving it a persistent environment and strict operating rules.

## 1. The "Profile" Concept
A **Profile** is a portable configuration set that defines the * capabilities* of an agent. It is NOT the same as a VS Code Profile.

### Anatomy of a Profile
Located at `.gemini/settings.json`, it controls:
*   **Security**: Can I delete files? Can I execute code?
*   **Tools (MCP)**: Do I have access to GitHub? To the Database?
*   **Persona**: Am I a "Secure Backend Dev" or a "Creative Frontend Designer"?

### Global vs. Local Scope
1.  **Global Profile (`~/.gemini/settings.json`)**: The fallback configuration.
2.  **Local Profile (`./.gemini/settings.json`)**: The project-specific override. **Precedence: Local > Global.**

---

## 2. Intelligent Bootstrap (The "Wizard")
Antigravity moves away from manual setup towards *Intelligent Bootstrapping*.

### The Workflow
1.  **User**: Runs `init-project.ps1 "MyProject"`.
2.  **System**: Creates the scaffold (folders, git).
3.  **User**: Runs `gemini /bootstrap`.
4.  **Agent (Skill: bootstrap-project)**:
    *   ğŸ•µï¸â€â™‚ï¸ **Detects**: "This is a Python/FastAPI project".
    *   âš™ï¸ **Configures Agent**: Generates `.gemini/settings.json` (Backend Profile).
    *   ğŸ¨ **Configures Editor**: Generates `.vscode/extensions.json` (Python, Ruff).

---

## 3. Project Structure Standard
Every Antigravity project MUST follow this structure to be compatible with the ecosystem:

```
project-root/
â”œâ”€â”€ .gemini/            # Agent Brain & Settings
â”œâ”€â”€ .vscode/            # Human Editor Settings (Generated by Bootstrap)
â”œâ”€â”€ src/                # Source Code
â”œâ”€â”€ tests/              # Automated Tests
â”œâ”€â”€ docs/               # Project Memory (Human & AI Readable)
â”‚   â”œâ”€â”€ architecture/   # Core Decisions (Like this file)
â”‚   â”œâ”€â”€ plans/          # Active Implementation Plans
â”‚   â””â”€â”€ research/       # Deep Dives
â””â”€â”€ config/             # Application Configuration
```

## 4. Synchronization Strategy
To prevent "Configuration Drift", we use a **Template-First** approach.
*   **Master Source**: `AG_Plantilla` (The Factory).
*   **Mechanism**: `robocopy` scripts in `_template/`.
*   **Rule**: Never edit scaffolding in a derived project manually; update the template and sync.
